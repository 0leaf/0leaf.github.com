---
title: "sharding"
layout: single
author_profile: false
read_time: true
share: true
related: true
categories:
  - Daily
tags:
  - Blog
toc: false
toc_stiky: true
description: ""
article_section: ""
meta_keywords: ""
last_modified_at: '"2024-07-06 09:00:00 +0800"'
---

# TL; DR
샤딩은 수평분할과 관련된 아키텍쳐 패턴입니다.
수평 확장과 단일 장애점(SPOF) 문제를 개선하기에 용이하지만, 그만큼 올바르게 동작하도록 구성하려면 많은 비용과 노력이 필요합니다.

# What is Sharding?
각 파티션이 동일한 스키마와 열을 갖지만 그 데이터인 행은 다르게 나누어 갖습니다.
![[Pasted image 20240706154642.png]](출처: https://www.digitalocean.com/community/tutorials/understanding-database-sharding)
위 그림이 이 내용을 쉽게 설명하고 있는데, 오른쪽에 해당하는 Horizontal Partitions 방식으로 데이터를 나누어 저장하는 것을 의미합니다.

# Pros
- Scale out에 용이합니다.
- 큰 테이블을 여러개로 샤딩하면 쿼리 성능이 올라갈 수 있습니다.
- 특정 샤딩된 영역에 문제 생긴다고 해도, 전체 서비스 장애가 발생하는 것을 막을 수 있습니다.

# Cons
- 샤딩을 제대로 구현하고 적용하는데 어려움이 많습니다. 잘못 구성하게 되면 데이터 손실등이 발생할 수 있습니다.
- 샤딩 알고리즘 등에 따라 샤드가 불균해질 수 있고 이를 관리해줘야 할 수 있습니다.
- 샤딩된 구조를 단일 아키텍쳐로 돌리기 어렵습니다.

# 샤딩 아키텍쳐 종류
- 키 기반 샤딩
- 범위 기반 샤딩
- 디렉토리 기반 샤딩

# Reference
- https://www.digitalocean.com/community/tutorials/understanding-database-sharding